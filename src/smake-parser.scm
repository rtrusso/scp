(need parse/parse)
(define action-table (vector (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args) (lambda args args)))
(define (smake-parse-input input) (run-parse (quote ((@goal @makefile) (@makefile @statement-list) (@statement-list @statement) (@statement-list @statement-list @statement) (@statement @definition) (@statement @rule) (@statement @empty-line) (@definition identifier equals @expression newline) (@rule @left-hand-side colon @element-list newline @rule-body) (@rule-body @rule-instruction) (@rule-body @rule-body @rule-instruction) (@rule-instruction tab @expression newline) (@left-hand-side @complex-identifier) (@empty-line newline) (@complex-identifier @simple-identifier-list) (@simple-identifier-list @simple-identifier) (@simple-identifier-list @simple-identifier-list @simple-identifier) (@simple-identifier identifier) (@simple-identifier freeform-identifier) (@simple-identifier @symbol-reference) (@simple-identifier whitespace) (@expression @element-list) (@element-list @element) (@element-list @element-list @element) (@element @input-symbol) (@element @output-symbol) (@input-symbol dollar less-than) (@output-symbol dollar at) (@element identifier) (@element @special-element) (@special-element @symbol-reference) (@special-element @function-invocation) (@symbol-reference dollar lparen identifier rparen) (@function-invocation dollar lparen identifier whitespace @expression rparen) (@element freeform-identifier) (@element whitespace) (@element tab) (@element percent) (@element dot) (@element colon) (@element equals) (@element comma) (@element less-than) (@element greater-than) (@element at))) (quote (identifier equals newline colon tab freeform-identifier whitespace dollar less-than at lparen rparen percent dot comma greater-than $)) (quote (@goal @makefile @statement-list @statement @definition @rule @rule-body @rule-instruction @left-hand-side @empty-line @complex-identifier @simple-identifier-list @simple-identifier @expression @element-list @element @input-symbol @output-symbol @special-element @symbol-reference @function-invocation)) (quote #(#((s . 5) #f (s . 16) #f #f (s . 11) (s . 14) (s . 13) #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f (a . #f)) #((s . 5) #f (s . 16) #f #f (s . 11) (s . 14) (s . 13) #f #f #f #f #f #f #f #f (r . 1)) #((r . 2) #f (r . 2) #f #f (r . 2) (r . 2) (r . 2) #f #f #f #f #f #f #f #f (r . 2)) #((r . 4) #f (r . 4) #f #f (r . 4) (r . 4) (r . 4) #f #f #f #f #f #f #f #f (r . 4)) #((r . 17) (s . 18) #f (r . 17) #f (r . 17) (r . 17) (r . 17) #f #f #f #f #f #f #f #f #f) #((r . 5) #f (r . 5) #f #f (r . 5) (r . 5) (r . 5) #f #f #f #f #f #f #f #f (r . 5)) #(#f #f #f (s . 19) #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f (r . 12) #f #f #f #f #f #f #f #f #f #f #f #f #f) #((s . 21) #f #f (r . 14) #f (s . 11) (s . 14) (s . 13) #f #f #f #f #f #f #f #f #f) #((r . 15) #f #f (r . 15) #f (r . 15) (r . 15) (r . 15) #f #f #f #f #f #f #f #f #f) #((r . 18) #f #f (r . 18) #f (r . 18) (r . 18) (r . 18) #f #f #f #f #f #f #f #f #f) #((r . 19) #f #f (r . 19) #f (r . 19) (r . 19) (r . 19) #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f (s . 22) #f #f #f #f #f #f) #((r . 20) #f #f (r . 20) #f (r . 20) (r . 20) (r . 20) #f #f #f #f #f #f #f #f #f) #((r . 6) #f (r . 6) #f #f (r . 6) (r . 6) (r . 6) #f #f #f #f #f #f #f #f (r . 6)) #((r . 13) #f (r . 13) #f #f (r . 13) (r . 13) (r . 13) #f #f #f #f #f #f #f #f (r . 13)) #((r . 3) #f (r . 3) #f #f (r . 3) (r . 3) (r . 3) #f #f #f #f #f #f #f #f (r . 3)) #((s . 29) (s . 39) #f (s . 38) (s . 35) (s . 33) (s . 34) (s . 27) (s . 41) (s . 43) #f #f (s . 36) (s . 37) (s . 40) (s . 42) #f) #((s . 29) (s . 39) #f (s . 38) (s . 35) (s . 33) (s . 34) (s . 27) (s . 41) (s . 43) #f #f (s . 36) (s . 37) (s . 40) (s . 42) #f) #((r . 16) #f #f (r . 16) #f (r . 16) (r . 16) (r . 16) #f #f #f #f #f #f #f #f #f) #((r . 17) #f #f (r . 17) #f (r . 17) (r . 17) (r . 17) #f #f #f #f #f #f #f #f #f) #((s . 45) #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f (s . 46) #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #((s . 29) (s . 39) (r . 21) (s . 38) (s . 35) (s . 33) (s . 34) (s . 27) (s . 41) (s . 43) #f (r . 21) (s . 36) (s . 37) (s . 40) (s . 42) #f) #((r . 22) (r . 22) (r . 22) (r . 22) (r . 22) (r . 22) (r . 22) (r . 22) (r . 22) (r . 22) #f (r . 22) (r . 22) (r . 22) (r . 22) (r . 22) #f) #((r . 24) (r . 24) (r . 24) (r . 24) (r . 24) (r . 24) (r . 24) (r . 24) (r . 24) (r . 24) #f (r . 24) (r . 24) (r . 24) (r . 24) (r . 24) #f) #(#f #f #f #f #f #f #f #f (s . 48) (s . 49) (s . 50) #f #f #f #f #f #f) #((r . 25) (r . 25) (r . 25) (r . 25) (r . 25) (r . 25) (r . 25) (r . 25) (r . 25) (r . 25) #f (r . 25) (r . 25) (r . 25) (r . 25) (r . 25) #f) #((r . 28) (r . 28) (r . 28) (r . 28) (r . 28) (r . 28) (r . 28) (r . 28) (r . 28) (r . 28) #f (r . 28) (r . 28) (r . 28) (r . 28) (r . 28) #f) #((r . 29) (r . 29) (r . 29) (r . 29) (r . 29) (r . 29) (r . 29) (r . 29) (r . 29) (r . 29) #f (r . 29) (r . 29) (r . 29) (r . 29) (r . 29) #f) #((r . 30) (r . 30) (r . 30) (r . 30) (r . 30) (r . 30) (r . 30) (r . 30) (r . 30) (r . 30) #f (r . 30) (r . 30) (r . 30) (r . 30) (r . 30) #f) #((r . 31) (r . 31) (r . 31) (r . 31) (r . 31) (r . 31) (r . 31) (r . 31) (r . 31) (r . 31) #f (r . 31) (r . 31) (r . 31) (r . 31) (r . 31) #f) #((r . 34) (r . 34) (r . 34) (r . 34) (r . 34) (r . 34) (r . 34) (r . 34) (r . 34) (r . 34) #f (r . 34) (r . 34) (r . 34) (r . 34) (r . 34) #f) #((r . 35) (r . 35) (r . 35) (r . 35) (r . 35) (r . 35) (r . 35) (r . 35) (r . 35) (r . 35) #f (r . 35) (r . 35) (r . 35) (r . 35) (r . 35) #f) #((r . 36) (r . 36) (r . 36) (r . 36) (r . 36) (r . 36) (r . 36) (r . 36) (r . 36) (r . 36) #f (r . 36) (r . 36) (r . 36) (r . 36) (r . 36) #f) #((r . 37) (r . 37) (r . 37) (r . 37) (r . 37) (r . 37) (r . 37) (r . 37) (r . 37) (r . 37) #f (r . 37) (r . 37) (r . 37) (r . 37) (r . 37) #f) #((r . 38) (r . 38) (r . 38) (r . 38) (r . 38) (r . 38) (r . 38) (r . 38) (r . 38) (r . 38) #f (r . 38) (r . 38) (r . 38) (r . 38) (r . 38) #f) #((r . 39) (r . 39) (r . 39) (r . 39) (r . 39) (r . 39) (r . 39) (r . 39) (r . 39) (r . 39) #f (r . 39) (r . 39) (r . 39) (r . 39) (r . 39) #f) #((r . 40) (r . 40) (r . 40) (r . 40) (r . 40) (r . 40) (r . 40) (r . 40) (r . 40) (r . 40) #f (r . 40) (r . 40) (r . 40) (r . 40) (r . 40) #f) #((r . 41) (r . 41) (r . 41) (r . 41) (r . 41) (r . 41) (r . 41) (r . 41) (r . 41) (r . 41) #f (r . 41) (r . 41) (r . 41) (r . 41) (r . 41) #f) #((r . 42) (r . 42) (r . 42) (r . 42) (r . 42) (r . 42) (r . 42) (r . 42) (r . 42) (r . 42) #f (r . 42) (r . 42) (r . 42) (r . 42) (r . 42) #f) #((r . 43) (r . 43) (r . 43) (r . 43) (r . 43) (r . 43) (r . 43) (r . 43) (r . 43) (r . 43) #f (r . 43) (r . 43) (r . 43) (r . 43) (r . 43) #f) #((r . 44) (r . 44) (r . 44) (r . 44) (r . 44) (r . 44) (r . 44) (r . 44) (r . 44) (r . 44) #f (r . 44) (r . 44) (r . 44) (r . 44) (r . 44) #f) #((s . 29) (s . 39) (s . 51) (s . 38) (s . 35) (s . 33) (s . 34) (s . 27) (s . 41) (s . 43) #f #f (s . 36) (s . 37) (s . 40) (s . 42) #f) #(#f #f #f #f #f #f #f #f #f #f #f (s . 52) #f #f #f #f #f) #((r . 7) #f (r . 7) #f #f (r . 7) (r . 7) (r . 7) #f #f #f #f #f #f #f #f (r . 7)) #((r . 23) (r . 23) (r . 23) (r . 23) (r . 23) (r . 23) (r . 23) (r . 23) (r . 23) (r . 23) #f (r . 23) (r . 23) (r . 23) (r . 23) (r . 23) #f) #((r . 26) (r . 26) (r . 26) (r . 26) (r . 26) (r . 26) (r . 26) (r . 26) (r . 26) (r . 26) #f (r . 26) (r . 26) (r . 26) (r . 26) (r . 26) #f) #((r . 27) (r . 27) (r . 27) (r . 27) (r . 27) (r . 27) (r . 27) (r . 27) (r . 27) (r . 27) #f (r . 27) (r . 27) (r . 27) (r . 27) (r . 27) #f) #((s . 53) #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f (s . 56) #f #f #f #f #f #f #f #f #f #f #f #f) #((r . 32) (r . 32) (r . 32) (r . 32) (r . 32) (r . 32) (r . 32) (r . 32) (r . 32) (r . 32) #f (r . 32) (r . 32) (r . 32) (r . 32) (r . 32) #f) #(#f #f #f #f #f #f (s . 57) #f #f #f #f (s . 52) #f #f #f #f #f) #((r . 8) #f (r . 8) #f (s . 56) (r . 8) (r . 8) (r . 8) #f #f #f #f #f #f #f #f (r . 8)) #((r . 9) #f (r . 9) #f (r . 9) (r . 9) (r . 9) (r . 9) #f #f #f #f #f #f #f #f (r . 9)) #((s . 29) (s . 39) #f (s . 38) (s . 35) (s . 33) (s . 34) (s . 27) (s . 41) (s . 43) #f #f (s . 36) (s . 37) (s . 40) (s . 42) #f) #((s . 29) (s . 39) #f (s . 38) (s . 35) (s . 33) (s . 34) (s . 27) (s . 41) (s . 43) #f #f (s . 36) (s . 37) (s . 40) (s . 42) #f) #((r . 10) #f (r . 10) #f (r . 10) (r . 10) (r . 10) (r . 10) #f #f #f #f #f #f #f #f (r . 10)) #(#f #f (s . 61) #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f (s . 62) #f #f #f #f #f) #((r . 11) #f (r . 11) #f (r . 11) (r . 11) (r . 11) (r . 11) #f #f #f #f #f #f #f #f (r . 11)) #((r . 33) (r . 33) (r . 33) (r . 33) (r . 33) (r . 33) (r . 33) (r . 33) (r . 33) (r . 33) #f (r . 33) (r . 33) (r . 33) (r . 33) (r . 33) #f))) (quote #(#(#f (g . 1) (g . 2) (g . 3) (g . 4) (g . 6) #f #f (g . 7) (g . 15) (g . 8) (g . 9) (g . 10) #f #f #f #f #f #f (g . 12) #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f (g . 17) (g . 4) (g . 6) #f #f (g . 7) (g . 15) (g . 8) (g . 9) (g . 10) #f #f #f #f #f #f (g . 12) #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f (g . 20) #f #f #f #f #f #f (g . 12) #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f (g . 23) (g . 24) (g . 25) (g . 26) (g . 28) (g . 30) (g . 31) (g . 32)) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f (g . 44) (g . 25) (g . 26) (g . 28) (g . 30) (g . 31) (g . 32)) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f (g . 47) (g . 26) (g . 28) (g . 30) (g . 31) (g . 32)) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f (g . 47) (g . 26) (g . 28) (g . 30) (g . 31) (g . 32)) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f (g . 54) (g . 55) #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f (g . 58) #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f (g . 59) (g . 24) (g . 25) (g . 26) (g . 28) (g . 30) (g . 31) (g . 32)) #(#f #f #f #f #f #f #f #f #f #f #f #f #f (g . 60) (g . 24) (g . 25) (g . 26) (g . 28) (g . 30) (g . 31) (g . 32)) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f) #(#f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f #f))) action-table input))
(define (smake-parse-port input-port) (smake-parse-input (read input-port)))
(define (smake-parse-file filename) (call-with-input-file filename smake-parse-port))
